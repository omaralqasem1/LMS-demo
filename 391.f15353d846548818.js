"use strict";(self.webpackChunkLMS_demo=self.webpackChunkLMS_demo||[]).push([[391],{8391:(vt,C,r)=>{r.r(C),r.d(C,{BooksModule:()=>ut});var m=r(6895),b=r(4385),g=r(8184),u=r(4080),t=r(4650),_=r(3238),x=r(9101),f=r(7579),O=r(3353),w=r(5698),P=r(2722),d=r(7340),M=r(2687),k=r(2289);function N(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",2)(1,"button",3),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.action())}),t._uU(2),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(2),t.Oqu(e.data.action)}}function I(n,s){}const L=new t.OlP("MatSnackBarData");class B{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}const Y=Math.pow(2,31)-1;class y{constructor(s,e){this._overlayRef=e,this._afterDismissed=new f.x,this._afterOpened=new f.x,this._onAction=new f.x,this._dismissedByAction=!1,this.containerInstance=s,s._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(s){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(s,Y))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}let j=(()=>{class n{constructor(e,a){this.snackBarRef=e,this.data=a}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(y),t.Y36(L))},n.\u0275cmp=t.Xpm({type:n,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-simple-snackbar"],decls:3,vars:2,consts:[[1,"mat-simple-snack-bar-content"],["class","mat-simple-snackbar-action",4,"ngIf"],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(e,a){1&e&&(t.TgZ(0,"span",0),t._uU(1),t.qZA(),t.YNc(2,N,3,1,"div",1)),2&e&&(t.xp6(1),t.Oqu(a.data.message),t.xp6(1),t.Q6J("ngIf",a.hasAction))},dependencies:[m.O5,x.lW],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}.mat-simple-snack-bar-content{overflow:hidden;text-overflow:ellipsis}"],encapsulation:2,changeDetection:0}),n})();const U={snackBarState:(0,d.X$)("state",[(0,d.SB)("void, hidden",(0,d.oB)({transform:"scale(0.8)",opacity:0})),(0,d.SB)("visible",(0,d.oB)({transform:"scale(1)",opacity:1})),(0,d.eR)("* => visible",(0,d.jt)("150ms cubic-bezier(0, 0, 0.2, 1)")),(0,d.eR)("* => void, * => hidden",(0,d.jt)("75ms cubic-bezier(0.4, 0.0, 1, 1)",(0,d.oB)({opacity:0})))])};let z=(()=>{class n extends u.en{constructor(e,a,i,o,c){super(),this._ngZone=e,this._elementRef=a,this._changeDetectorRef=i,this._platform=o,this.snackBarConfig=c,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new f.x,this._onExit=new f.x,this._onEnter=new f.x,this._animationState="void",this.attachDomPortal=l=>{this._assertNotAttached();const p=this._portalOutlet.attachDomPortal(l);return this._afterPortalAttached(),p},this._live="assertive"!==c.politeness||c.announcementMessage?"off"===c.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(e){this._assertNotAttached();const a=this._portalOutlet.attachComponentPortal(e);return this._afterPortalAttached(),a}attachTemplatePortal(e){this._assertNotAttached();const a=this._portalOutlet.attachTemplatePortal(e);return this._afterPortalAttached(),a}onAnimationEnd(e){const{fromState:a,toState:i}=e;if(("void"===i&&"void"!==a||"hidden"===i)&&this._completeExit(),"visible"===i){const o=this._onEnter;this._ngZone.run(()=>{o.next(),o.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe((0,w.q)(1)).subscribe(()=>{this._ngZone.run(()=>{this._onExit.next(),this._onExit.complete()})})}_afterPortalAttached(){const e=this._elementRef.nativeElement,a=this.snackBarConfig.panelClass;a&&(Array.isArray(a)?a.forEach(i=>e.classList.add(i)):e.classList.add(a))}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const e=this._elementRef.nativeElement.querySelector("[aria-hidden]"),a=this._elementRef.nativeElement.querySelector("[aria-live]");if(e&&a){let i=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&e.contains(document.activeElement)&&(i=document.activeElement),e.removeAttribute("aria-hidden"),a.appendChild(e),i?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.R0b),t.Y36(t.SBq),t.Y36(t.sBO),t.Y36(O.t4),t.Y36(B))},n.\u0275dir=t.lG2({type:n,viewQuery:function(e,a){if(1&e&&t.Gf(u.Pl,7),2&e){let i;t.iGM(i=t.CRH())&&(a._portalOutlet=i.first)}},features:[t.qOj]}),n})(),G=(()=>{class n extends z{_afterPortalAttached(){super._afterPortalAttached(),"center"===this.snackBarConfig.horizontalPosition&&this._elementRef.nativeElement.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&this._elementRef.nativeElement.classList.add("mat-snack-bar-top")}}return n.\u0275fac=function(){let s;return function(a){return(s||(s=t.n5z(n)))(a||n)}}(),n.\u0275cmp=t.Xpm({type:n,selectors:[["snack-bar-container"]],hostAttrs:[1,"mat-snack-bar-container"],hostVars:1,hostBindings:function(e,a){1&e&&t.WFA("@state.done",function(o){return a.onAnimationEnd(o)}),2&e&&t.d8E("@state",a._animationState)},features:[t.qOj],decls:3,vars:2,consts:[["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(e,a){1&e&&(t.TgZ(0,"div",0),t.YNc(1,I,0,0,"ng-template",1),t.qZA(),t._UZ(2,"div")),2&e&&(t.xp6(2),t.uIk("aria-live",a._live)("role",a._role))},dependencies:[u.Pl],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}.cdk-high-contrast-active .mat-snack-bar-container{border:solid 1px}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}"],encapsulation:2,data:{animation:[U.snackBarState]}}),n})(),T=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[g.U8,u.eL,m.ez,x.ot,_.BQ,_.BQ]}),n})();const D=new t.OlP("mat-snack-bar-default-options",{providedIn:"root",factory:function Q(){return new B}});let J=(()=>{class n{constructor(e,a,i,o,c,l){this._overlay=e,this._live=a,this._injector=i,this._breakpointObserver=o,this._parentSnackBar=c,this._defaultConfig=l,this._snackBarRefAtThisLevel=null}get _openedSnackBarRef(){const e=this._parentSnackBar;return e?e._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(e){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=e:this._snackBarRefAtThisLevel=e}openFromComponent(e,a){return this._attach(e,a)}openFromTemplate(e,a){return this._attach(e,a)}open(e,a="",i){const o={...this._defaultConfig,...i};return o.data={message:e,action:a},o.announcementMessage===e&&(o.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,o)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(e,a){const o=t.zs3.create({parent:a&&a.viewContainerRef&&a.viewContainerRef.injector||this._injector,providers:[{provide:B,useValue:a}]}),c=new u.C5(this.snackBarContainerComponent,a.viewContainerRef,o),l=e.attach(c);return l.instance.snackBarConfig=a,l.instance}_attach(e,a){const i={...new B,...this._defaultConfig,...a},o=this._createOverlay(i),c=this._attachSnackBarContainer(o,i),l=new y(c,o);if(e instanceof t.Rgc){const p=new u.UE(e,null,{$implicit:i.data,snackBarRef:l});l.instance=c.attachTemplatePortal(p)}else{const p=this._createInjector(i,l),pt=new u.C5(e,void 0,p),ft=c.attachComponentPortal(pt);l.instance=ft.instance}return this._breakpointObserver.observe(k.u3.HandsetPortrait).pipe((0,P.R)(o.detachments())).subscribe(p=>{o.overlayElement.classList.toggle(this.handsetCssClass,p.matches)}),i.announcementMessage&&c._onAnnounce.subscribe(()=>{this._live.announce(i.announcementMessage,i.politeness)}),this._animateSnackBar(l,i),this._openedSnackBarRef=l,this._openedSnackBarRef}_animateSnackBar(e,a){e.afterDismissed().subscribe(()=>{this._openedSnackBarRef==e&&(this._openedSnackBarRef=null),a.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{e.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):e.containerInstance.enter(),a.duration&&a.duration>0&&e.afterOpened().subscribe(()=>e._dismissAfter(a.duration))}_createOverlay(e){const a=new g.X_;a.direction=e.direction;let i=this._overlay.position().global();const o="rtl"===e.direction,c="left"===e.horizontalPosition||"start"===e.horizontalPosition&&!o||"end"===e.horizontalPosition&&o,l=!c&&"center"!==e.horizontalPosition;return c?i.left("0"):l?i.right("0"):i.centerHorizontally(),"top"===e.verticalPosition?i.top("0"):i.bottom("0"),a.positionStrategy=i,this._overlay.create(a)}_createInjector(e,a){return t.zs3.create({parent:e&&e.viewContainerRef&&e.viewContainerRef.injector||this._injector,providers:[{provide:y,useValue:a},{provide:L,useValue:e.data}]})}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(g.aV),t.LFG(M.Kd),t.LFG(t.zs3),t.LFG(k.Yg),t.LFG(n,12),t.LFG(D))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})(),H=(()=>{class n extends J{constructor(e,a,i,o,c,l){super(e,a,i,o,c,l),this.simpleSnackBarComponent=j,this.snackBarContainerComponent=G,this.handsetCssClass="mat-snack-bar-handset"}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(g.aV),t.LFG(M.Kd),t.LFG(t.zs3),t.LFG(k.Yg),t.LFG(n,12),t.LFG(D))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:T}),n})();var v=r(9116),R=r(4245),Z=r(6242),h=r(7155),S=r(9549),X=r(4598);function K(n,s){if(1&n&&(t.TgZ(0,"mat-option",12),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function V(n,s){1&n&&(t.TgZ(0,"th",13),t._uU(1," Name "),t.qZA())}function W(n,s){if(1&n&&(t.TgZ(0,"td",14)(1,"a",15),t._uU(2),t.qZA()()),2&n){const e=s.$implicit;t.xp6(1),t.Q6J("routerLink",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function $(n,s){1&n&&t._UZ(0,"tr",16)}function q(n,s){1&n&&t._UZ(0,"tr",17)}function tt(n,s){1&n&&(t.TgZ(0,"div",18)(1,"h3"),t._uU(2,"Please select category to show available books"),t.qZA()())}let et=(()=>{class n{constructor(e,a){this.booksService=e,this.displayedColumns=["name"],this.list=[],this.categories$=a.getList(),this.isLoading=!1,this.hasError=!1,this.hasData=!1,this.categorySelected=!1}ngOnDestroy(){this.getListSubscription&&this.getListSubscription.unsubscribe()}ngOnInit(){}selectCategory(e){this.isLoading=!0,this.hasError=!1,this.categorySelected=!0,this.getListSubscription&&this.getListSubscription.unsubscribe(),this.getListSubscription=this.booksService.getList(a=>a.where("categoryId","==",e.value)).subscribe({next:a=>{this.list=a,this.isLoading=!1,this.hasError=!1,this.hasData=this.list.length>0},error:a=>{this.isLoading=!1,this.hasError=!0}})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(R.y),t.Y36(Z.G))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-books-list"]],decls:17,vars:10,consts:[[1,"d-flex","align-items-center","mb-3"],["appearance","outline"],[3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"isLoading","hasError","hasData"],["mat-table","",1,"mat-elevation-z8","w-100",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","text-muted text-center",4,"ngIf"],[3,"value"],["mat-header-cell",""],["mat-cell",""],["href","/details",3,"routerLink"],["mat-header-row",""],["mat-row",""],[1,"text-muted","text-center"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0)(1,"h1"),t._uU(2,"Books"),t.qZA()(),t.TgZ(3,"mat-form-field",1)(4,"mat-label"),t._uU(5,"Category"),t.qZA(),t.TgZ(6,"mat-select",2),t.NdJ("selectionChange",function(o){return a.selectCategory(o)}),t.YNc(7,K,2,2,"mat-option",3),t.ALo(8,"async"),t.qZA()(),t.TgZ(9,"app-list-preload",4)(10,"table",5),t.ynx(11,6),t.YNc(12,V,2,0,"th",7),t.YNc(13,W,3,2,"td",8),t.BQk(),t.YNc(14,$,1,0,"tr",9),t.YNc(15,q,1,0,"tr",10),t.qZA()(),t.YNc(16,tt,3,0,"div",11)),2&e&&(t.xp6(7),t.Q6J("ngForOf",t.lcZ(8,8,a.categories$)),t.xp6(2),t.Q6J("isLoading",a.isLoading)("hasError",a.hasError)("hasData",a.hasData),t.xp6(1),t.Q6J("dataSource",a.list),t.xp6(4),t.Q6J("matHeaderRowDef",a.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns),t.xp6(1),t.Q6J("ngIf",!a.categorySelected))},dependencies:[m.sg,m.O5,v.yS,h.BZ,h.fO,h.as,h.w1,h.Dz,h.nj,h.ge,h.ev,h.XQ,h.Gk,S.KE,S.hX,b.gD,_.ey,X.r,m.Ov]}),n})();var A=r(4006),E=r(4004);let nt=(()=>{class n{constructor(e){this.categoriesService=e}transform(e){return this.categoriesService.get(e).pipe((0,E.U)(a=>a?.name||"N/A"))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Z.G,16))},n.\u0275pipe=t.Yjl({name:"categoryName",type:n,pure:!0}),n})();var at=r(7938);let st=(()=>{class n{constructor(e){this.authorsService=e}transform(e){return this.authorsService.get(e).pipe((0,E.U)(a=>a?.name||"N/A"))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(at.S,16))},n.\u0275pipe=t.Yjl({name:"authorName",type:n,pure:!0}),n})(),it=(()=>{class n{constructor(e,a){this.form=e.group({name:[],categoryId:[],author:[]}),this.book=a.snapshot.data.book}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(A.qu),t.Y36(v.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-books-details"]],decls:22,vars:11,consts:[[1,"mb-3"],[1,"fs-3","p-4","d-flex","flex-column","gap-2"],[1,"text-muted"],[1,"ms-2"]],template:function(e,a){1&e&&(t.TgZ(0,"h1",0),t._uU(1,"Book Details"),t.qZA(),t.TgZ(2,"div",1)(3,"div")(4,"span",2),t._uU(5," Name: "),t.qZA(),t.TgZ(6,"span",3),t._uU(7),t.qZA()(),t.TgZ(8,"div")(9,"span",2),t._uU(10," Category: "),t.qZA(),t.TgZ(11,"span",3),t._uU(12),t.ALo(13,"async"),t.ALo(14,"categoryName"),t.qZA()(),t.TgZ(15,"div")(16,"span",2),t._uU(17," Author: "),t.qZA(),t.TgZ(18,"span",3),t._uU(19),t.ALo(20,"async"),t.ALo(21,"authorName"),t.qZA()()()),2&e&&(t.xp6(7),t.hij(" ",a.book.name," "),t.xp6(5),t.hij(" ",t.lcZ(13,3,t.lcZ(14,5,a.book.categoryId))," "),t.xp6(7),t.hij(" ",t.lcZ(20,7,t.lcZ(21,9,a.book.authorId))," "))},dependencies:[m.Ov,nt,st]}),n})();var ot=r(8505),rt=r(262),ct=r(2843);let F=(()=>{class n{constructor(e,a,i){this.booksService=e,this.router=a,this._snackBar=i}resolve(e,a){return this.booksService.get(e.params.id).pipe((0,ot.b)(o=>{if(!o)throw new Error("not exist")}),(0,rt.K)(o=>(this._snackBar.open("Book not found!",void 0,{duration:3e3,horizontalPosition:"end",panelClass:["bg-danger","text-white","fw-bold","m-5","p-3"]}),this.router.navigate(["books"]),(0,ct._)(()=>o))))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(R.y),t.LFG(v.F0),t.LFG(H))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})();const lt=[{path:"",component:et},{path:":id",component:it,resolve:{book:F}}];let ht=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[v.Bz.forChild(lt),v.Bz]}),n})();var dt=r(4144),mt=r(4466);let ut=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[F],imports:[m.ez,ht,h.p0,A.u5,A.UX,S.lN,dt.c,b.LD,mt.m,T]}),n})()}}]);